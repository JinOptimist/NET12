@model List<FeedBackUserViewModel>


<div class="reviews-all">

    @{
        if (Model.Any())
            foreach (var item in Model)
            {

                <div class="review">

                    <div class="rname-ico">
                        <img src="https://media.pn.am/media/issue/197/297/photo/197297.jpg" class="img-review" />
                    </div>
                    <div class="rname-ico-text">
                        <div>
                            Name: @item.Creator.UserName
                        </div>
                        <div>
                            <div>Rating: @item.Rate</div>
                        </div>
                    </div>
                    <div class="rate-text">
                        @item.TextInfo
                    </div>
                    <div class="rate-text edit-info">
                        @if (item.CanEdit)
                        {
                            <a href="/Home/ChangeReviewForm?idReview=@item.Id">Edit</a>
                            <a href="/Home/RemoveReview?idReview=@item.Id">Remove</a>
                        }
                    </div>

                </div>

            }
    }
</div>
@if (User.Identity.IsAuthenticated)
{
    <div style="margin-top: 3%;">
        @if (Model.Any(rev => rev.NowEdit == true) == true)
        {
            @Html.HiddenFor(x=> x.FirstOrDefault().Id)
            <form action="/Home/ChangeReview" method="post" class="rate-put">
                <div>Изменить отзыв</div>
                <div>
                    <div>
                        <select name="Rate" size="2">
                            <option disabled="disabled">Оцените проект</option>
                            <option value="1" selected="selected">Rate: 1</option>
                            <option value="2">Rate: 2</option>
                            <option value="3">Rate: 3</option>
                            <option value="4">Rate: 4</option>
                            <option value="5">Rate: 5</option>
                        </select>
                        <div>@Html.ValidationMessageFor(x => x.FirstOrDefault().Rate)</div>
                    </div>
                    <div>
                        <textarea name="TextInfo" placeholder="Comment">@Model.Single(rev => rev.NowEdit == true).TextInfo</textarea>
                        <div>@Html.ValidationMessageFor(x => x.FirstOrDefault().TextInfo)</div>
                    </div>
                    <div>
                        <input type="submit" value="Изменить" />
                        <input type="button" href="/Home/Reviews" value="Отменить" />
                    </div>
                </div>
            </form>
        }
        else
        {
            <form action="/Home/Reviews" method="post" class="rate-put">
                <div>Оставить отзыв</div>
                <div>
                    <div>
                        <select name="Rate" size="2">
                            <option disabled="disabled">Оцените проект</option>
                            <option value="1" selected="selected">Rate: 1</option>
                            <option value="2">Rate: 2</option>
                            <option value="3">Rate: 3</option>
                            <option value="4">Rate: 4</option>
                            <option value="5">Rate: 5</option>
                        </select>
                        <div>@Html.ValidationMessageFor(x => x.FirstOrDefault().Rate)</div>
                    </div>
                    <div>
                        <textarea name="TextInfo" placeholder="Comment"></textarea>
                        <div>@Html.ValidationMessageFor(x => x.FirstOrDefault().TextInfo)</div>
                    </div>
                    <div>
                        <input type="submit" value="Отправить" />
                    </div>
                </div>
            </form>
        }
    </div>
}